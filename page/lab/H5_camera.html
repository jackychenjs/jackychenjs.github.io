<!DOCTYPE html>
<html>
<head>
	<title>爱生活大法好!</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" id="viewport" name="viewport">
	<link href="/favicon.ico" type="image/x-icon" rel="shortcut icon">

	<link rel="stylesheet" href="../../static/css/common/reset.css">
	<link rel="stylesheet" href="../../static/css/common/common.css">

	<style>

	</style>
</head>
<body>
<div>Camera Test</div>
	<button id="run">开启网络摄像头</button><Br/>
	<video id="webcam" style="height:240px"></video>

	<script type="text/javascript">
		alert('getUserMedia: '+navigator.getUserMedia);
		alert('mozGetUserMedia: '+navigator.mozGetUserMedia);
		alert('webkitGetUserMedia: '+navigator.webkitGetUserMedia);
		alert('msGetUserMedia: '+navigator.msGetUserMedia);
	 	navigator.getUserMedia || (navigator.getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia);

		if (navigator.getUserMedia) {
			alert('ok');
		    var btn = document.getElementById('run');
			btn.onclick = startWebcam;

			function startWebcam(e) {
			    navigator.getUserMedia({
			        video: true,
			        audio: false
			    }, onSuccess, onError);

			    function onSuccess(stream) {
			    	alert('inSuccess');
			        var video = document.getElementById('webcam');

			        if (window.URL) {
			            video.src = window.URL.createObjectURL(stream);
			        } else {
			            video.src = stream;
			        }

			        video.autoplay = true;
			        //or video.play();
			    }

			    function onError() {
			    	alert('inError');
			    }
			}
		}

	</script>
</body>
</html>