<!DOCTYPE html>
<html>
<head>
	<title>爱生活大法好!</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" id="viewport" name="viewport">
	<link href="/favicon.ico" type="image/x-icon" rel="shortcut icon">

	<link rel="stylesheet" href="../../static/css/common/reset.css">
	<link rel="stylesheet" href="../../static/css/common/common.css">

	<style>

	</style>
</head>
<body>
<div>Camera Test</div>
	<button id="run">开启网络摄像头</button><Br/>
	<video id="webcam" style="height:240px"></video>

	<script type="text/javascript">
		var video = document.getElementById("video"),
	 	navigator.getUserMedia || (navigator.getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia);

		if (!navigator.getUserMedia) {
		    return 0;
		}

		var btn = document.getElementById('run');
		btn.onclick = startWebcam;

		function startWebcam(e) {
		    navigator.getUserMedia({
		        video: true,
		        audio: true
		    }, onSuccess, onError);

		    function onSuccess(stream) {

		        var video = document.getElementById('webcam');

		        if (window.URL) {
		            video.src = window.URL.createObjectURL(stream);
		        } else {
		            video.src = stream;
		        }

		        video.autoplay = true;
		        //or video.play();
		    }

		    function onError() {}
		}
	</script>
</body>
</html>